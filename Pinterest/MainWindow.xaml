<Window x:Class="Pinterest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Pinterest"
        Title="Pinterest Gallery"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen" Icon="/pinterest.png" Cursor="Pen">

    <Window.Resources>
        <Style x:Key="MainButtonStyleLight" TargetType="Button">
            <Setter Property="Background" Value="#007ACC" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="MinWidth" Value="80" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4" >
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True" />
                                    <Condition Property="IsPressed" Value="True" />
                                </MultiTrigger.Conditions>
                                <Setter TargetName="border" Property="Background" Value="#003F66" />
                            </MultiTrigger>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#005A9E" />
                            </Trigger>

                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#CCC" />
                                <Setter Property="Foreground" Value="#888" />
                                <Setter Property="Cursor" Value="Arrow" />
                            </Trigger>

                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="0" To="1" Duration="0:0:5" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MainButtonStyleDark" TargetType="Button" BasedOn="{StaticResource MainButtonStyleLight}">
            <Setter Property="Background" Value="#222" />
            <Setter Property="Foreground" Value="#EEE" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4" >
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True" />
                                    <Condition Property="IsPressed" Value="True" />
                                </MultiTrigger.Conditions>
                                <Setter TargetName="border" Property="Background" Value="#555" />
                            </MultiTrigger>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#444" />
                            </Trigger>

                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#333" />
                                <Setter Property="Foreground" Value="#666" />
                                <Setter Property="Cursor" Value="Arrow" />
                            </Trigger>

                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="border"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="0" To="1" Duration="0:0:5" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MainButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyleLight}" />

        <Style x:Key="MainTextBoxStyle" TargetType="TextBox">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderBrush" Value="#CCC" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="#333" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="30" />
            <Setter Property="MinWidth" Value="200" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ScrollViewer Margin="0"
                                          x:Name="PART_ContentHost" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#007ACC" />
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#005A9E" />
                                <Setter TargetName="border" Property="Background" Value="#F0F8FF" />
                            </Trigger>

                            <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Self}}" Value="">
                                <Setter TargetName="border" Property="BorderBrush" Value="Red" />
                                <Setter TargetName="border" Property="Background" Value="#FFE6E6" />
                            </DataTrigger>

                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#EEE" />
                                <Setter Property="Foreground" Value="#999" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Window.DataContext>
        <local:MainViewModel/>
    </Window.DataContext>

    <DockPanel>
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Background="#F7F9FC" VerticalAlignment="Center">
            <Button Content="Галерея" Command="{Binding OpenGalleryCommand}" Style="{DynamicResource MainButtonStyle}" />
            <Button Content="Подписки" Command="{Binding OpenSubscriptionsCommand}" Style="{DynamicResource MainButtonStyle}" />
            <Button Content="Загрузить" Command="{Binding OpenUploadCommand}" Style="{DynamicResource MainButtonStyle}" />

            <TextBox Width="200"
                     Style="{StaticResource MainTextBoxStyle}"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     KeyDown="SearchBox_KeyDown"
                     ToolTip="Введите тег или автор:имя" />

            <Button Content="Поиск" Command="{Binding SearchCommand}" Style="{DynamicResource MainButtonStyle}" />

            <Button Content="{Binding UserInitial}"
                    Command="{Binding OpenAccountMenuCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Self}}"
                    HorizontalAlignment="Right"
                    Style="{DynamicResource MainButtonStyle}" />

            <Button Content="Переключить стиль"
                    Click="ToggleStyleButton_Click"
                    Style="{DynamicResource MainButtonStyle}" />
        </StackPanel>

        <ContentControl Content="{Binding CurrentView}" />
    </DockPanel>
</Window>